<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ü—ä–ª–Ω–∞ –ì–∞–ª–µ—Ä–∏—è | –¢–û–ü –ü–ê–†–ö–ï–¢ –í–ê–†–ù–ê</title>
  <link rel="stylesheet" href="style.css">
  <style>
    .full-gallery-wrapper { 
      padding: 40px 0; 
      margin-top: 80px;
      background: linear-gradient(135deg, rgba(248, 249, 250, 0.95), rgba(233, 236, 239, 0.95));
    }
    .full-gallery-container {
      display: flex;
      flex-direction: column;
      gap: 40px;
      margin-top: 40px;
      align-items: center;
    }
    @media (max-width: 768px) { 
      .full-gallery-container { 
        gap: 30px;
      }
    }
    @media (max-width: 480px) {
      .full-gallery-container {
        gap: 20px;
      }
    }
    
    /* Ensure images are visible in full gallery */
    .full-gallery-slider .before-after-slide__before,
    .full-gallery-slider .before-after-slide__after {
      opacity: 1 !important;
      visibility: visible !important;
      display: block !important;
      position: absolute !important;
      top: 0 !important;
      left: 0 !important;
      width: 100% !important;
      height: 100% !important;
      object-fit: cover !important;
    }
    
    /* Removed static clip-path - let JavaScript control it */
    .full-gallery-slider .before-after-slide__before {
      /* clip-path will be set by JavaScript */
    }
    
    .full-gallery-slider .before-after-slide__after {
      /* clip-path will be set by JavaScript */
    }
    
    .full-gallery-slider .before-after-slide__container {
      position: relative;
      width: 100%;
      height: 100%;
      overflow: hidden;
      min-height: 400px;
      background: #f0f0f0;
    }
    
    .full-gallery-slider {
      min-height: 400px;
      background: #f0f0f0;
      width: 100%;
      max-width: 800px;
    }
    
    .full-gallery-container .before-after-container {
      width: 100%;
      max-width: 800px;
    }
    
    .full-gallery-slider .before-after-slide {
      display: block !important;
      opacity: 1 !important;
      visibility: visible !important;
    }
  </style>
  </head>
  <body>
    <header class="header" id="header">
      <div class="container">
        <div class="header__content">
          <div class="header__logo"><h1>–¢–û–ü –ü–ê–†–ö–ï–¢ –í–ê–†–ù–ê</h1></div>
          <nav class="header__nav" id="nav">
            <ul class="nav__list">
              <li><a href="index.html#home">–ù–∞—á–∞–ª–æ</a></li>
              <li><a href="index.html#services">–£—Å–ª—É–≥–∏</a></li>
              <li><a href="index.html#gallery">–ì–∞–ª–µ—Ä–∏—è</a></li>
              <li><a href="index.html#pricing">–¶–µ–Ω–∏</a></li>
              <li><a href="index.html#testimonials">–ó–∞ –Ω–∞—Å</a></li>
              <li><a href="index.html#contact">–ö–æ–Ω—Ç–∞–∫—Ç–∏</a></li>
            </ul>
          </nav>
          <div class="header__cta">
            <a href="tel:0887726236" class="header__phone">0887726236</a>
            <a class="btn btn--primary" href="index.html#contact">–ó–∞—è–≤–∫–∞ —Å–µ–≥–∞</a>
          </div>
        </div>
      </div>
    </header>
    <main class="full-gallery-wrapper">
      <div class="container">
        <div class="section-header">
          <h2>–ü—ä–ª–Ω–∞ –ì–∞–ª–µ—Ä–∏—è</h2>
          <p>–ü—Ä–µ–¥–∏ –∏ —Å–ª–µ–¥ –æ—Ç –Ω–∞—à–∏ —Ä–µ–∞–ª–Ω–∏ –ø—Ä–æ–µ–∫—Ç–∏ - –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è</p>
        </div>
        <div class="full-gallery-container" id="fullGalleryContainer"></div>
      </div>
    </main>
    <div class="sticky-contact" id="stickyContact">
      <a href="tel:0887726236" class="sticky-phone"><span class="sticky-phone__icon">üìû</span></a>
    </div>
    <script src="app.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        initFullGallery();
      });

      function initFullGallery() {
        const container = document.getElementById('fullGalleryContainer');
        if (!container) {
          console.log('Container not found');
          return;
        }

        console.log('Initializing full gallery...');

        // Build before/after pairs
        const pairs = buildBeforeAfterPairs();
        const validPairs = pairs.slice(5, 69); // Show first 20 pairs

        console.log('Found pairs:', validPairs.length);

        // Render individual sliders
        validPairs.forEach((pair, index) => {
          const sliderWrapper = document.createElement('div');
          sliderWrapper.className = 'before-after-container';
          sliderWrapper.innerHTML = `
            <div class="before-after-slider full-gallery-slider">
              <div class="before-after-slide active">
                <div class="before-after-slide__container">
                  <img src="${pair.before}" alt="–ü—Ä–µ–¥–∏ - –ø—Ä–æ–µ–∫—Ç ${pair.index}" class="before-after-slide__before" onload="console.log('Before image loaded:', this.src)" onerror="console.log('Before image failed:', this.src); this.parentElement.parentElement.parentElement.parentElement.style.display='none'" />
                  <img src="${pair.after}" alt="–°–ª–µ–¥ - –ø—Ä–æ–µ–∫—Ç ${pair.index}" class="before-after-slide__after" onload="console.log('After image loaded:', this.src)" onerror="console.log('After image failed:', this.src); this.parentElement.parentElement.parentElement.parentElement.style.display='none'" />
                  <div class="before-after-slide__handle"></div>
                  <div class="before-after-slide__labels">
                    <div class="before-after-slide__label before-after-slide__label--before">–ü—Ä–µ–¥–∏ –Ω–∞—Å</div>
                    <div class="before-after-slide__label before-after-slide__label--after">–°–ª–µ–¥ –Ω–∞—Å</div>
                  </div>
                </div>
              </div>
            </div>
          `;
          container.appendChild(sliderWrapper);
        });

        console.log('Sliders rendered, initializing hover...');

        // Initialize mouse hover functionality for all sliders
        setTimeout(() => {
          initFullGalleryHover();
        }, 100);
      }

      function buildBeforeAfterPairs() {
        const pairs = [];
        for (let i = 1; i <= 50; i++) {
          pairs.push({
            before: `gallery_images/${i}-–ü—Ä–µ–¥–∏.jpg`,
            after: `gallery_images/${i}-–°–ª–µ–¥.jpg`,
            index: i
          });
        }
        return pairs;
      }

      function initFullGalleryHover() {
        const sliders = document.querySelectorAll('.full-gallery-slider');
        
        console.log('Found sliders:', sliders.length);
        
        sliders.forEach((slider, index) => {
          const container = slider.querySelector('.before-after-slide__container');
          const beforeImg = slider.querySelector('.before-after-slide__before');
          const afterImg = slider.querySelector('.before-after-slide__after');
          const handle = slider.querySelector('.before-after-slide__handle');
          const beforeLabel = slider.querySelector('.before-after-slide__label--before');
          const afterLabel = slider.querySelector('.before-after-slide__label--after');
          
          console.log(`Slider ${index + 1} elements:`, {
            container: !!container,
            beforeImg: !!beforeImg,
            afterImg: !!afterImg,
            handle: !!handle,
            beforeLabel: !!beforeLabel,
            afterLabel: !!afterLabel
          });
          
          if (!container || !beforeImg || !afterImg || !handle) {
            console.log(`Slider ${index + 1} missing elements, skipping`);
            return;
          }
          
          function updateSliderPosition(x) {
            const rect = container.getBoundingClientRect();
            const percentage = Math.max(0, Math.min(100, (x / rect.width) * 100));
            
            console.log(`Updating slider ${index + 1} position:`, { x, percentage, rectWidth: rect.width });
            
            // Apply clip-path with !important to override any CSS conflicts
            beforeImg.style.setProperty('clip-path', `inset(0 ${100 - percentage}% 0 0)`, 'important');
            afterImg.style.setProperty('clip-path', `inset(0 0 0 ${percentage}%)`, 'important');
            handle.style.left = `${percentage}%`;
            
            // Debug: Check if clip-path is actually applied
            console.log('Before img clip-path:', beforeImg.style.clipPath);
            console.log('After img clip-path:', afterImg.style.clipPath);
            
            // Update label visibility
            if (percentage < 20) {
              beforeLabel.style.opacity = '0';
              afterLabel.style.opacity = '1';
            } else if (percentage > 80) {
              beforeLabel.style.opacity = '1';
              afterLabel.style.opacity = '0';
            } else {
              beforeLabel.style.opacity = '1';
              afterLabel.style.opacity = '1';
            }
          }
          
          function handleMouseMove(e) {
            const rect = container.getBoundingClientRect();
            const x = e.clientX - rect.left;
            updateSliderPosition(x);
          }
          
          function handleTouchMove(e) {
            if (e.touches.length > 0) {
              const rect = container.getBoundingClientRect();
              const x = e.touches[0].clientX - rect.left;
              updateSliderPosition(x);
            }
          }
          
          // Mouse events
          container.addEventListener('mousemove', (e) => {
            console.log('Mouse move detected on slider', index + 1);
            handleMouseMove(e);
          });
          
          // Touch events for mobile
          container.addEventListener('touchmove', (e) => {
            console.log('Touch move detected on slider', index + 1);
            handleTouchMove(e);
          }, { passive: false });
          
          console.log(`Event listeners attached to slider ${index + 1}`);
          
          // Initialize at 50% and ensure images are visible
          setTimeout(() => {
            const rect = container.getBoundingClientRect();
            if (rect.width > 0) {
              updateSliderPosition(rect.width / 2);
            }
            
            // Ensure images are visible and properly clipped
            beforeImg.style.opacity = '1';
            afterImg.style.opacity = '1';
            beforeImg.style.visibility = 'visible';
            afterImg.style.visibility = 'visible';
            
            // Set initial clip-path with !important
            beforeImg.style.setProperty('clip-path', 'inset(0 50% 0 0)', 'important');
            afterImg.style.setProperty('clip-path', 'inset(0 0 0 50%)', 'important');
            
            console.log(`Initialized slider ${index + 1} with 50/50 split`);
            
          }, 200);
        });
      }
    </script>
  </body>
  </html>


